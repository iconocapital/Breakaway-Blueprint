<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Breakaway Blueprint™ — Independence Candidacy Assessment</title>
<meta name="description" content="Evaluate your readiness for financial independence with the Breakaway Blueprint™ assessment from Iconoclastic Capital Management." />
<meta property="og:title" content="Breakaway Blueprint™ — Independence Candidacy Assessment" />
<meta property="og:description" content="Are you ready to break away? Take the structured assessment designed for financial advisors evaluating independence." />
<meta property="og:type" content="website" />
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600;700&family=DM+Serif+Display&display=swap" rel="stylesheet" />
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  html { scroll-behavior: smooth; }
  body {
    min-height: 100vh; background: #0f0f0f; color: #e8e4dc;
    font-family: 'DM Sans', sans-serif; -webkit-font-smoothing: antialiased;
  }
  input[type="range"] { -webkit-appearance: none; appearance: none; width: 100%; height: 6px; background: rgba(255,255,255,0.1); border-radius: 3px; outline: none; }
  input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 22px; height: 22px; border-radius: 50%; background: #c9a84c; cursor: pointer; border: 2px solid #0f0f0f; box-shadow: 0 0 0 3px rgba(201,168,76,0.25); }
  input[type="range"]::-moz-range-thumb { width: 22px; height: 22px; border-radius: 50%; background: #c9a84c; cursor: pointer; border: 2px solid #0f0f0f; box-shadow: 0 0 0 3px rgba(201,168,76,0.25); }
  input[type="text"], input[type="email"], input[type="tel"] {
    width: 100%; background: rgba(255,255,255,0.04); border: 1px solid rgba(255,255,255,0.1);
    border-radius: 10px; padding: 14px 18px; color: #e8e4dc; font-size: 15px;
    font-family: 'DM Sans', sans-serif; outline: none; transition: border-color 0.2s;
  }
  input[type="text"]:focus, input[type="email"]:focus, input[type="tel"]:focus {
    border-color: rgba(201,168,76,0.5);
  }
  input::placeholder { color: rgba(255,255,255,0.25); }
  @keyframes fadeUp { from { opacity: 0; transform: translateY(16px); } to { opacity: 1; transform: translateY(0); } }
  .fade-up { animation: fadeUp 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards; }
  .fade-up-d1 { animation-delay: 0.1s; opacity: 0; }
  .fade-up-d2 { animation-delay: 0.2s; opacity: 0; }
  .fade-up-d3 { animation-delay: 0.3s; opacity: 0; }
  .fade-up-d4 { animation-delay: 0.4s; opacity: 0; }
</style>
</head>
<body>
<div id="app"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>

<script type="text/babel">
const { useState, useEffect, useRef } = React;

/* ─── DATA ─── */
const SECTIONS = [
  { id: "intro", title: "Welcome", subtitle: "Independence Candidacy Assessment" },
  {
    id: "revenue", title: "Revenue & Book Structure", subtitle: "Section 1 of 5",
    questions: [
      { id: "q_revenue", text: "What was your total annual gross revenue over the trailing 12 months?", subtext: "Advisory fees + brokerage + insurance combined", type: "single",
        options: [
          { label: "Under $300K", score: 0 }, { label: "$300K – $500K", score: 2 },
          { label: "$500K – $1M", score: 4 }, { label: "$1M – $2M", score: 5 }, { label: "$2M+", score: 5 },
        ],
      },
      { id: "q_households", text: "Approximately how many client households do you currently serve?", type: "single",
        options: [
          { label: "Under 50", score: 2 }, { label: "50 – 100", score: 4 },
          { label: "100 – 200", score: 5 }, { label: "200+", score: 3 },
        ],
      },
      { id: "q_structure", text: "How is your practice currently structured?", type: "single",
        options: [
          { label: "Solo advisor", score: 2 }, { label: "Advisor + 1–2 support staff", score: 3 },
          { label: "Small team (3–5 total)", score: 5 }, { label: "Larger team (6+)", score: 4 },
        ],
      },
      { id: "q_model", text: "Which independence structure are you currently evaluating?", type: "single",
        options: [
          { label: "Full RIA", score: 5 }, { label: "Hybrid model (e.g., Osaic, Commonwealth)", score: 3 },
          { label: "Unsure", score: 1 },
        ],
      },
    ],
  },
  {
    id: "intent", title: "Independence Intent & Timing", subtitle: "Section 2 of 5",
    questions: [
      { id: "q_timeline", text: "When are you realistically considering independence?", type: "single",
        options: [
          { label: "Within 3 months", score: 5 }, { label: "3–6 months", score: 5 },
          { label: "6–12 months", score: 3 }, { label: "12+ months", score: 2 }, { label: "Exploring only", score: 1 },
        ],
      },
      { id: "q_retention", text: "Are you currently under a retention package or forgivable loan?", type: "single",
        options: [ { label: "No", score: 5 }, { label: "Yes", score: 1 } ],
      },
      { id: "q_decision_maker", text: "Are you the primary decision-maker regarding a potential transition?", type: "single",
        options: [ { label: "Yes", score: 5 }, { label: "Shared authority", score: 3 }, { label: "No", score: 1 } ],
      },
      { id: "q_portability", text: "What percentage of your current revenue do you believe is portable?", type: "single",
        options: [
          { label: "Under 50%", score: 1 }, { label: "50–70%", score: 2 },
          { label: "70–90%", score: 4 }, { label: "90%+", score: 5 }, { label: "Unsure", score: 1 },
        ],
      },
    ],
  },
  {
    id: "financial", title: "Financial Readiness", subtitle: "Section 3 of 5",
    questions: [
      { id: "q_revenue_decline", text: "If revenue declined 25% for 6–9 months during transition, could you maintain personal and business stability?", type: "single",
        options: [ { label: "Yes", score: 5 }, { label: "With meaningful adjustments", score: 3 }, { label: "No", score: 0 } ],
      },
      { id: "q_liquidity", text: "How much personal liquidity (cash or accessible reserves) do you currently maintain?", type: "single",
        options: [
          { label: "Under 6 months of expenses", score: 1 }, { label: "6–12 months", score: 3 },
          { label: "12+ months", score: 5 }, { label: "Prefer not to disclose", score: 0 },
        ],
      },
      { id: "q_investment_ready", text: "The Breakaway Blueprint™ requires a $2,500 Readiness Audit and $30K–$40K engagement. Are you prepared to invest at this level?", type: "single",
        options: [ { label: "Yes", score: 5 }, { label: "Possibly", score: 3 }, { label: "Not at this time", score: 0 } ],
      },
    ],
  },
  {
    id: "psychological", title: "Psychological Readiness", subtitle: "Section 4 of 5",
    questions: [
      { id: "q_uncertainty", text: "When facing uncertainty, you typically:", type: "single",
        options: [
          { label: "Make decisive moves with incomplete information", score: 5 },
          { label: "Gather more data before acting", score: 3 },
          { label: "Delay action to reduce risk", score: 1 },
        ],
      },
      { id: "q_high_stakes", text: "In the past 12 months, have you made a high-stakes decision involving real financial or reputational risk?", type: "single",
        options: [ { label: "Yes", score: 5 }, { label: "No", score: 1 } ],
      },
      { id: "q_feedback", text: "When challenged directly about blind spots in your leadership, you tend to:", type: "single",
        options: [ { label: "Welcome it", score: 5 }, { label: "Tolerate it", score: 3 }, { label: "Resist it", score: 0 } ],
      },
      { id: "q_client_loss", text: "If a key client indicated they might not follow you during transition, your likely internal response would be:", type: "single",
        options: [ { label: "Strategic recalibration", score: 5 }, { label: "Frustration", score: 2 }, { label: "Self-doubt", score: 0 } ],
      },
      { id: "q_partner_align", text: "How aligned is your spouse/partner regarding independence?", type: "single",
        options: [
          { label: "Fully aligned", score: 5 }, { label: "Supportive but concerned", score: 3 },
          { label: "Uncertain", score: 1 }, { label: "Resistant", score: 0 },
        ],
      },
      { id: "q_volatility", text: "How comfortable are you with temporary income volatility and public uncertainty?", type: "slider", min: 1, max: 10, scoreMultiplier: 0.5 },
      { id: "q_identity", text: "Today, you primarily see yourself as:", type: "single",
        options: [
          { label: "A high-performing advisor", score: 2 }, { label: "A business owner", score: 4 },
          { label: "A founder", score: 5 }, { label: "A future CEO", score: 5 }, { label: "Unsure", score: 1 },
        ],
      },
    ],
  },
  {
    id: "operator", title: "Operator Discipline", subtitle: "Section 5 of 5",
    questions: [
      { id: "q_sops", text: "Do you currently operate with documented processes (SOPs) for client onboarding, service, and compliance?", type: "single",
        options: [ { label: "Yes, fully documented", score: 5 }, { label: "Partially documented", score: 3 }, { label: "No", score: 0 } ],
      },
      { id: "q_metrics", text: "How frequently do you review business performance metrics?", type: "single",
        options: [ { label: "Weekly", score: 5 }, { label: "Monthly", score: 4 }, { label: "Quarterly", score: 2 }, { label: "Rarely", score: 0 } ],
      },
      { id: "q_dip_response", text: "When performance dips, your default move is:", type: "single",
        options: [
          { label: "Increase structure and clarity", score: 5 }, { label: "Increase activity and prospecting", score: 3 },
          { label: "Wait for market conditions to improve", score: 1 }, { label: "Blame external factors", score: 0 },
        ],
      },
      { id: "q_transition_exp", text: "Have you led a team through a significant transition before?", type: "single",
        options: [ { label: "Yes", score: 5 }, { label: "No", score: 1 } ],
      },
      { id: "q_sustained_focus", text: "If independence required 60–90 days of disciplined preparation without recognition or validation, would you remain focused?", type: "single",
        options: [ { label: "Yes", score: 5 }, { label: "Probably", score: 3 }, { label: "Unlikely", score: 0 } ],
      },
      { id: "q_feedback_ready", text: "Are you prepared to receive direct feedback — including the possibility that independence is not appropriate at this time?", type: "single",
        options: [ { label: "Yes", score: 5 }, { label: "No", score: 0 } ],
      },
      { id: "q_prep_open", text: "If independence is not viable within 12 months, would you be open to strengthening your leadership and operations in preparation?", type: "single",
        options: [ { label: "Yes", score: 5 }, { label: "Maybe", score: 3 }, { label: "No", score: 0 } ],
      },
    ],
  },
  { id: "capture", title: "Get Your Results", subtitle: "One more step" },
  { id: "results", title: "Your Results", subtitle: "Independence Readiness Score" },
];

const MAX_POSSIBLE = 130;

const QUESTION_LABELS = {
  q_revenue: "Trailing 12-Mo Revenue", q_households: "Client Households", q_structure: "Practice Structure",
  q_model: "Target Structure", q_timeline: "Timeline", q_retention: "Retention Package",
  q_decision_maker: "Decision Authority", q_portability: "Revenue Portability",
  q_revenue_decline: "Withstand 25% Decline", q_liquidity: "Personal Liquidity",
  q_investment_ready: "Investment Readiness", q_uncertainty: "Uncertainty Response",
  q_high_stakes: "High-Stakes Decision History", q_feedback: "Feedback Reception",
  q_client_loss: "Client Loss Response", q_partner_align: "Partner Alignment",
  q_volatility: "Volatility Comfort (1-10)", q_identity: "Self-Identity",
  q_sops: "Documented SOPs", q_metrics: "Metrics Review Cadence",
  q_dip_response: "Performance Dip Response", q_transition_exp: "Transition Experience",
  q_sustained_focus: "Sustained Focus", q_feedback_ready: "Direct Feedback Readiness",
  q_prep_open: "Open to Preparation",
};

function getReadinessLevel(pct) {
  if (pct >= 80) return { tier: "HIGH READINESS", color: "#22c55e", bg: "rgba(34,197,94,0.08)", border: "rgba(34,197,94,0.25)",
    headline: "You're a strong candidate for the Breakaway Blueprint™.",
    body: "Your structural, financial, psychological, and operational indicators align with the profile of advisors who successfully transition to independence. The next step is the Independent Readiness Audit — a focused diagnostic to validate your pathway and build your 180-day plan.",
    cta: "Schedule Your Readiness Audit", ctaUrl: "https://iconocapital.com/contact" };
  if (pct >= 60) return { tier: "MODERATE READINESS", color: "#eab308", bg: "rgba(234,179,8,0.08)", border: "rgba(234,179,8,0.25)",
    headline: "You have strong fundamentals — with gaps to address.",
    body: "Your profile shows meaningful alignment with independence, but key areas need strengthening before a transition would be structurally sound. We may recommend a targeted preparation engagement to close specific gaps before entering the full Breakaway Blueprint™.",
    cta: "Explore Preparation Pathways", ctaUrl: "https://iconocapital.com/contact" };
  if (pct >= 40) return { tier: "EARLY STAGE", color: "#f97316", bg: "rgba(249,115,22,0.08)", border: "rgba(249,115,22,0.25)",
    headline: "Independence is plausible — but not imminent.",
    body: "Several foundational areas require significant development before a breakaway would be viable. This isn't a disqualification — it's a diagnosis. With the right preparation, many advisors in this range reach full readiness within 12–18 months.",
    cta: "Request a Diagnostic Conversation", ctaUrl: "https://iconocapital.com/contact" };
  return { tier: "NOT YET READY", color: "#ef4444", bg: "rgba(239,68,68,0.08)", border: "rgba(239,68,68,0.25)",
    headline: "Independence is not the right move right now.",
    body: "Your current profile suggests that pursuing independence at this stage would carry significant structural and personal risk. This assessment is designed to protect you. We'd recommend focusing on revenue growth, operational discipline, and financial reserves before revisiting.",
    cta: "Subscribe for Future Resources", ctaUrl: "https://iconocapital.com/contact" };
}

function getSectionBreakdown(answers) {
  const defs = [
    { id: "revenue", label: "Revenue & Structure", maxScore: 20, qIds: ["q_revenue","q_households","q_structure","q_model"] },
    { id: "intent", label: "Intent & Timing", maxScore: 20, qIds: ["q_timeline","q_retention","q_decision_maker","q_portability"] },
    { id: "financial", label: "Financial Readiness", maxScore: 15, qIds: ["q_revenue_decline","q_liquidity","q_investment_ready"] },
    { id: "psychological", label: "Psychological Readiness", maxScore: 35, qIds: ["q_uncertainty","q_high_stakes","q_feedback","q_client_loss","q_partner_align","q_volatility","q_identity"] },
    { id: "operator", label: "Operator Discipline", maxScore: 35, qIds: ["q_sops","q_metrics","q_dip_response","q_transition_exp","q_sustained_focus","q_feedback_ready","q_prep_open"] },
  ];
  return defs.map(s => {
    const earned = s.qIds.reduce((sum, qid) => sum + (answers[qid] || 0), 0);
    return { ...s, earned, pct: Math.round((earned / s.maxScore) * 100) };
  });
}

/* ─── FORMSPREE CONFIG ─── */
// SETUP: Go to https://formspree.io, create a free account, create a new form
// pointed at chris@iconocapital.com, and paste your form ID below.
const FORMSPREE_ID = "YOUR_FORM_ID"; // e.g. "xpzvqkdl"

/* ─── COMPONENTS ─── */
function ProgressBar({ current, total }) {
  return React.createElement("div", { style: { display: "flex", gap: 4, padding: "0 32px", marginBottom: 32 } },
    Array.from({ length: total }).map((_, i) =>
      React.createElement("div", { key: i, style: {
        flex: 1, height: 3, borderRadius: 2,
        background: i <= current ? "#c9a84c" : "rgba(255,255,255,0.08)",
        transition: "background 0.4s ease",
      }})
    )
  );
}

function RadioQuestion({ question, selected, onSelect }) {
  return React.createElement("div", { style: { marginBottom: 40 } },
    React.createElement("p", { style: { color: "#e8e4dc", fontSize: 17, lineHeight: 1.6, marginBottom: 16 } }, question.text),
    question.subtext && React.createElement("p", { style: { color: "rgba(255,255,255,0.35)", fontSize: 13, marginBottom: 16, marginTop: -8 } }, question.subtext),
    React.createElement("div", { style: { display: "flex", flexDirection: "column", gap: 8 } },
      question.options.map((opt, i) => {
        const isSel = selected === i;
        return React.createElement("button", {
          key: i, onClick: () => onSelect(i),
          style: {
            background: isSel ? "rgba(201,168,76,0.12)" : "rgba(255,255,255,0.03)",
            border: "1px solid " + (isSel ? "rgba(201,168,76,0.5)" : "rgba(255,255,255,0.08)"),
            borderRadius: 10, padding: "14px 20px", cursor: "pointer",
            display: "flex", alignItems: "center", gap: 14, transition: "all 0.2s ease", textAlign: "left",
          },
          onMouseEnter: (e) => { if (!isSel) { e.currentTarget.style.background = "rgba(255,255,255,0.05)"; e.currentTarget.style.borderColor = "rgba(255,255,255,0.15)"; }},
          onMouseLeave: (e) => { if (!isSel) { e.currentTarget.style.background = "rgba(255,255,255,0.03)"; e.currentTarget.style.borderColor = "rgba(255,255,255,0.08)"; }},
        },
          React.createElement("div", { style: {
            width: 20, height: 20, borderRadius: "50%", flexShrink: 0,
            border: "2px solid " + (isSel ? "#c9a84c" : "rgba(255,255,255,0.2)"),
            display: "flex", alignItems: "center", justifyContent: "center", transition: "all 0.2s ease",
          }}, isSel && React.createElement("div", { style: { width: 10, height: 10, borderRadius: "50%", background: "#c9a84c" } })),
          React.createElement("span", { style: { color: isSel ? "#e8e4dc" : "rgba(255,255,255,0.6)", fontSize: 15, transition: "color 0.2s ease" } }, opt.label)
        );
      })
    )
  );
}

function SliderQuestion({ question, value, onChange }) {
  const val = value ?? 5;
  return React.createElement("div", { style: { marginBottom: 40 } },
    React.createElement("p", { style: { color: "#e8e4dc", fontSize: 17, lineHeight: 1.6, marginBottom: 8 } }, question.text),
    React.createElement("div", { style: { display: "flex", alignItems: "center", gap: 16, marginTop: 16 } },
      React.createElement("span", { style: { color: "rgba(255,255,255,0.35)", fontSize: 13, minWidth: 16 } }, "1"),
      React.createElement("input", { type: "range", min: 1, max: 10, value: val, onChange: (e) => onChange(Number(e.target.value)), style: { flex: 1, cursor: "pointer" } }),
      React.createElement("span", { style: { color: "rgba(255,255,255,0.35)", fontSize: 13, minWidth: 16 } }, "10"),
    ),
    React.createElement("div", { style: { textAlign: "center", marginTop: 8 } },
      React.createElement("span", { style: {
        display: "inline-block", background: "rgba(201,168,76,0.15)", color: "#c9a84c",
        padding: "4px 16px", borderRadius: 20, fontSize: 20, fontWeight: 600, fontFamily: "'DM Serif Display', serif",
      } }, val)
    )
  );
}

function ScoreRing({ pct }) {
  const r = 70, s = 6, c = 2 * Math.PI * r;
  const off = c - (pct / 100) * c;
  const level = getReadinessLevel(pct);
  return React.createElement("div", { style: { display: "flex", justifyContent: "center", margin: "32px 0" } },
    React.createElement("svg", { width: 180, height: 180, viewBox: "0 0 180 180" },
      React.createElement("circle", { cx: 90, cy: 90, r, fill: "none", stroke: "rgba(255,255,255,0.06)", strokeWidth: s }),
      React.createElement("circle", { cx: 90, cy: 90, r, fill: "none", stroke: level.color, strokeWidth: s,
        strokeDasharray: c, strokeDashoffset: off, strokeLinecap: "round", transform: "rotate(-90 90 90)",
        style: { transition: "stroke-dashoffset 1.2s cubic-bezier(0.4,0,0.2,1)" } }),
      React.createElement("text", { x: 90, y: 82, textAnchor: "middle", fill: "#e8e4dc", fontSize: 36, fontFamily: "'DM Serif Display', serif", fontWeight: 400 }, pct),
      React.createElement("text", { x: 90, y: 105, textAnchor: "middle", fill: "rgba(255,255,255,0.35)", fontSize: 12, fontFamily: "'DM Sans', sans-serif", letterSpacing: 1 }, "OUT OF 100"),
    )
  );
}

function SectionBar({ section }) {
  const c = section.pct >= 75 ? "#22c55e" : section.pct >= 50 ? "#eab308" : section.pct >= 30 ? "#f97316" : "#ef4444";
  return React.createElement("div", { style: { marginBottom: 20 } },
    React.createElement("div", { style: { display: "flex", justifyContent: "space-between", marginBottom: 6 } },
      React.createElement("span", { style: { color: "rgba(255,255,255,0.6)", fontSize: 13 } }, section.label),
      React.createElement("span", { style: { color: c, fontSize: 13, fontWeight: 600 } }, section.pct + "%"),
    ),
    React.createElement("div", { style: { height: 6, background: "rgba(255,255,255,0.06)", borderRadius: 3 } },
      React.createElement("div", { style: { height: "100%", borderRadius: 3, background: c, width: section.pct + "%", transition: "width 0.8s cubic-bezier(0.4,0,0.2,1)" } })
    )
  );
}

/* ─── MAIN APP ─── */
function App() {
  const [step, setStep] = useState(0);
  const [answers, setAnswers] = useState({});
  const [sliderValues, setSliderValues] = useState({});
  const [animateIn, setAnimateIn] = useState(true);
  const [leadForm, setLeadForm] = useState({ name: "", email: "", phone: "", firm: "" });
  const [submitting, setSubmitting] = useState(false);
  const [submitError, setSubmitError] = useState("");

  const totalSteps = SECTIONS.length;
  const currentSection = SECTIONS[step];

  useEffect(() => { setAnimateIn(false); const t = setTimeout(() => setAnimateIn(true), 50); return () => clearTimeout(t); }, [step]);

  const handleAnswer = (qId, idx, score) => setAnswers(p => ({ ...p, [qId]: score, [qId + "_idx"]: idx }));
  const handleSlider = (qId, val, mult) => { setSliderValues(p => ({ ...p, [qId]: val })); setAnswers(p => ({ ...p, [qId]: Math.round(val * mult) })); };

  const canProceed = () => {
    if (!currentSection.questions) return true;
    return currentSection.questions.every(q => answers[q.id] !== undefined);
  };

  const goNext = () => { window.scrollTo({ top: 0, behavior: "smooth" }); if (step < totalSteps - 1) setStep(step + 1); };
  const goBack = () => { window.scrollTo({ top: 0, behavior: "smooth" }); if (step > 0) setStep(step - 1); };

  const totalScore = Object.entries(answers).filter(([k]) => !k.endsWith("_idx")).reduce((s, [, v]) => s + v, 0);
  const pctScore = Math.round((totalScore / MAX_POSSIBLE) * 100);
  const readiness = getReadinessLevel(pctScore);
  const breakdown = getSectionBreakdown(answers);

  // Build answer summary for email
  const buildAnswerSummary = () => {
    let lines = [];
    SECTIONS.forEach(sec => {
      if (!sec.questions) return;
      sec.questions.forEach(q => {
        const label = QUESTION_LABELS[q.id] || q.id;
        if (q.type === "slider") {
          lines.push(label + ": " + (sliderValues[q.id] ?? "N/A") + "/10");
        } else {
          const idx = answers[q.id + "_idx"];
          const answer = idx !== undefined ? q.options[idx].label : "N/A";
          lines.push(label + ": " + answer);
        }
      });
    });
    lines.push("");
    lines.push("OVERALL SCORE: " + pctScore + "/100 (" + readiness.tier + ")");
    breakdown.forEach(s => { lines.push(s.label + ": " + s.pct + "%"); });
    return lines.join("\n");
  };

  const handleSubmitLead = async () => {
    if (!leadForm.name || !leadForm.email) return;
    setSubmitting(true);
    setSubmitError("");

    const payload = {
      name: leadForm.name,
      email: leadForm.email,
      phone: leadForm.phone || "Not provided",
      firm: leadForm.firm || "Not provided",
      score: pctScore + "/100",
      tier: readiness.tier,
      answers: buildAnswerSummary(),
      _subject: "Breakaway Blueprint™ Assessment: " + leadForm.name + " (" + readiness.tier + " — " + pctScore + "/100)",
    };

    try {
      const res = await fetch("https://formspree.io/f/" + FORMSPREE_ID, {
        method: "POST",
        headers: { "Content-Type": "application/json", Accept: "application/json" },
        body: JSON.stringify(payload),
      });
      if (res.ok) {
        goNext();
      } else {
        setSubmitError("Submission failed. Please try again.");
      }
    } catch (err) {
      setSubmitError("Network error. Please try again.");
    }
    setSubmitting(false);
  };

  // Shared button styles
  const goldBtn = (disabled) => ({
    background: disabled ? "rgba(255,255,255,0.06)" : "#c9a84c",
    color: disabled ? "rgba(255,255,255,0.2)" : "#0f0f0f",
    border: "none", padding: "16px 40px", borderRadius: 8, fontSize: 15,
    fontWeight: 600, cursor: disabled ? "not-allowed" : "pointer",
    letterSpacing: 0.3, transition: "all 0.2s ease", width: "100%",
  });

  return React.createElement("div", {
    style: { minHeight: "100vh", background: "#0f0f0f", fontFamily: "'DM Sans', sans-serif", color: "#e8e4dc",
      display: "flex", flexDirection: "column", alignItems: "center" }
  },
    React.createElement("div", { style: { width: "100%", maxWidth: 640, padding: "40px 24px 100px" } },
      /* Header */
      React.createElement("div", { style: { textAlign: "center", marginBottom: 12 } },
        React.createElement("div", { style: { fontSize: 11, letterSpacing: 3, color: "#c9a84c", textTransform: "uppercase", fontWeight: 600, marginBottom: 4 } }, "BREAKAWAY BLUEPRINT™")
      ),

      step > 0 && step < totalSteps - 2 && React.createElement(ProgressBar, { current: step - 1, total: totalSteps - 3 }),

      React.createElement("div", {
        style: { opacity: animateIn ? 1 : 0, transform: animateIn ? "translateY(0)" : "translateY(12px)", transition: "all 0.4s cubic-bezier(0.4,0,0.2,1)" }
      },

        /* ── INTRO ── */
        step === 0 && React.createElement("div", { style: { textAlign: "center", padding: "40px 0" } },
          React.createElement("h1", { className: "fade-up", style: { fontFamily: "'DM Serif Display', serif", fontSize: 32, fontWeight: 400, lineHeight: 1.3, marginBottom: 20 } },
            "Independence Candidacy", React.createElement("br"), "Assessment"),
          React.createElement("div", { className: "fade-up fade-up-d1", style: { width: 48, height: 1, background: "#c9a84c", margin: "0 auto 24px" } }),
          React.createElement("p", { className: "fade-up fade-up-d2", style: { color: "rgba(255,255,255,0.5)", fontSize: 15, lineHeight: 1.7, maxWidth: 440, margin: "0 auto 12px" } },
            "This assessment evaluates your structural viability, financial readiness, psychological resilience, and operator discipline."),
          React.createElement("p", { className: "fade-up fade-up-d3", style: { color: "rgba(255,255,255,0.35)", fontSize: 13, lineHeight: 1.7, maxWidth: 440, margin: "0 auto 40px" } },
            "Answer candidly. These responses determine whether the Breakaway Blueprint™ is the right engagement — or whether an alternative preparation pathway is more appropriate."),
          React.createElement("p", { className: "fade-up fade-up-d3", style: { color: "rgba(255,255,255,0.25)", fontSize: 12, marginBottom: 40 } }, "Estimated time: 5–7 minutes"),
          React.createElement("button", {
            className: "fade-up fade-up-d4",
            onClick: goNext, style: { ...goldBtn(false), width: "auto", padding: "16px 48px" },
            onMouseEnter: (e) => e.currentTarget.style.background = "#d4b45e",
            onMouseLeave: (e) => e.currentTarget.style.background = "#c9a84c",
          }, "Begin Assessment")
        ),

        /* ── QUESTION SECTIONS ── */
        step > 0 && step < totalSteps - 2 && currentSection.questions && React.createElement("div", null,
          React.createElement("div", { style: { marginBottom: 32 } },
            React.createElement("span", { style: { fontSize: 11, letterSpacing: 2, color: "rgba(255,255,255,0.3)", textTransform: "uppercase", fontWeight: 600 } }, currentSection.subtitle),
            React.createElement("h2", { style: { fontFamily: "'DM Serif Display', serif", fontSize: 26, fontWeight: 400, marginTop: 8 } }, currentSection.title),
          ),
          currentSection.questions.map(q =>
            q.type === "slider"
              ? React.createElement(SliderQuestion, { key: q.id, question: q, value: sliderValues[q.id], onChange: (v) => handleSlider(q.id, v, q.scoreMultiplier) })
              : React.createElement(RadioQuestion, { key: q.id, question: q, selected: answers[q.id + "_idx"], onSelect: (i) => handleAnswer(q.id, i, q.options[i].score) })
          ),
          React.createElement("div", { style: { display: "flex", justifyContent: "space-between", marginTop: 24, gap: 12 } },
            React.createElement("button", { onClick: goBack, style: {
              background: "transparent", color: "rgba(255,255,255,0.4)", border: "1px solid rgba(255,255,255,0.1)",
              padding: "14px 28px", borderRadius: 8, fontSize: 14, cursor: "pointer", transition: "all 0.2s ease",
            },
              onMouseEnter: (e) => { e.currentTarget.style.borderColor = "rgba(255,255,255,0.2)"; e.currentTarget.style.color = "rgba(255,255,255,0.6)"; },
              onMouseLeave: (e) => { e.currentTarget.style.borderColor = "rgba(255,255,255,0.1)"; e.currentTarget.style.color = "rgba(255,255,255,0.4)"; },
            }, "Back"),
            React.createElement("button", {
              onClick: goNext, disabled: !canProceed(),
              style: { ...goldBtn(!canProceed()), width: "auto", padding: "14px 36px" },
              onMouseEnter: (e) => { if (canProceed()) e.currentTarget.style.background = "#d4b45e"; },
              onMouseLeave: (e) => { if (canProceed()) e.currentTarget.style.background = "#c9a84c"; },
            }, step === totalSteps - 3 ? "Continue" : "Continue")
          )
        ),

        /* ── LEAD CAPTURE ── */
        step === totalSteps - 2 && React.createElement("div", { style: { padding: "20px 0" } },
          React.createElement("div", { style: { textAlign: "center", marginBottom: 36 } },
            React.createElement("div", { style: { width: 56, height: 56, borderRadius: "50%", background: "rgba(201,168,76,0.1)", border: "1px solid rgba(201,168,76,0.25)", margin: "0 auto 20px", display: "flex", alignItems: "center", justifyContent: "center" } },
              React.createElement("span", { style: { fontSize: 24 } }, "✓")
            ),
            React.createElement("h2", { style: { fontFamily: "'DM Serif Display', serif", fontSize: 26, fontWeight: 400, marginBottom: 12 } }, "Assessment Complete"),
            React.createElement("p", { style: { color: "rgba(255,255,255,0.45)", fontSize: 15, lineHeight: 1.7, maxWidth: 400, margin: "0 auto" } },
              "Enter your details to unlock your Independence Readiness Score, section-by-section breakdown, and personalized recommendations."),
          ),
          React.createElement("div", { style: { display: "flex", flexDirection: "column", gap: 16, marginBottom: 24 } },
            React.createElement("div", null,
              React.createElement("label", { style: { display: "block", fontSize: 12, color: "rgba(255,255,255,0.4)", marginBottom: 6, letterSpacing: 0.5 } }, "FULL NAME *"),
              React.createElement("input", { type: "text", placeholder: "John Smith", value: leadForm.name, onChange: (e) => setLeadForm(p => ({ ...p, name: e.target.value })) }),
            ),
            React.createElement("div", null,
              React.createElement("label", { style: { display: "block", fontSize: 12, color: "rgba(255,255,255,0.4)", marginBottom: 6, letterSpacing: 0.5 } }, "EMAIL ADDRESS *"),
              React.createElement("input", { type: "email", placeholder: "john@example.com", value: leadForm.email, onChange: (e) => setLeadForm(p => ({ ...p, email: e.target.value })) }),
            ),
            React.createElement("div", null,
              React.createElement("label", { style: { display: "block", fontSize: 12, color: "rgba(255,255,255,0.4)", marginBottom: 6, letterSpacing: 0.5 } }, "MOBILE NUMBER"),
              React.createElement("input", { type: "tel", placeholder: "(555) 123-4567", value: leadForm.phone, onChange: (e) => setLeadForm(p => ({ ...p, phone: e.target.value })) }),
            ),
            React.createElement("div", null,
              React.createElement("label", { style: { display: "block", fontSize: 12, color: "rgba(255,255,255,0.4)", marginBottom: 6, letterSpacing: 0.5 } }, "CURRENT FIRM / PLATFORM"),
              React.createElement("input", { type: "text", placeholder: "e.g., Merrill Lynch, UBS, Edward Jones", value: leadForm.firm, onChange: (e) => setLeadForm(p => ({ ...p, firm: e.target.value })) }),
            ),
          ),
          submitError && React.createElement("p", { style: { color: "#ef4444", fontSize: 13, textAlign: "center", marginBottom: 16 } }, submitError),
          React.createElement("button", {
            onClick: handleSubmitLead,
            disabled: !leadForm.name || !leadForm.email || submitting,
            style: { ...goldBtn(!leadForm.name || !leadForm.email || submitting) },
            onMouseEnter: (e) => { if (leadForm.name && leadForm.email && !submitting) e.currentTarget.style.background = "#d4b45e"; },
            onMouseLeave: (e) => { if (leadForm.name && leadForm.email && !submitting) e.currentTarget.style.background = "#c9a84c"; },
          }, submitting ? "Submitting…" : "Unlock My Results"),
          React.createElement("p", { style: { color: "rgba(255,255,255,0.2)", fontSize: 11, textAlign: "center", marginTop: 16, lineHeight: 1.5 } },
            "Your information will be shared with Iconoclastic Capital Management for follow-up. We respect your privacy."),
          React.createElement("div", { style: { textAlign: "center", marginTop: 12 } },
            React.createElement("button", { onClick: goBack, style: {
              background: "transparent", color: "rgba(255,255,255,0.3)", border: "none", fontSize: 13, cursor: "pointer",
            }}, "← Back to questions"),
          ),
        ),

        /* ── RESULTS ── */
        step === totalSteps - 1 && React.createElement("div", { style: { padding: "20px 0" } },
          React.createElement("div", { style: { textAlign: "center", marginBottom: 8 } },
            React.createElement("span", { style: { fontSize: 11, letterSpacing: 3, color: readiness.color, textTransform: "uppercase", fontWeight: 700 } }, readiness.tier),
          ),
          React.createElement(ScoreRing, { pct: pctScore }),
          React.createElement("div", { style: { background: readiness.bg, border: "1px solid " + readiness.border, borderRadius: 12, padding: 28, marginBottom: 32, textAlign: "center" } },
            React.createElement("h3", { style: { fontFamily: "'DM Serif Display', serif", fontSize: 20, fontWeight: 400, marginBottom: 12 } }, readiness.headline),
            React.createElement("p", { style: { color: "rgba(255,255,255,0.55)", fontSize: 14, lineHeight: 1.7 } }, readiness.body),
          ),
          React.createElement("div", { style: { background: "rgba(255,255,255,0.02)", border: "1px solid rgba(255,255,255,0.06)", borderRadius: 12, padding: 28, marginBottom: 32 } },
            React.createElement("h4", { style: { fontSize: 12, letterSpacing: 2, color: "rgba(255,255,255,0.35)", textTransform: "uppercase", fontWeight: 600, marginBottom: 24 } }, "Score Breakdown"),
            breakdown.map(s => React.createElement(SectionBar, { key: s.id, section: s })),
          ),
          (() => {
            const weakest = breakdown.reduce((m, s) => s.pct < m.pct ? s : m, breakdown[0]);
            if (weakest.pct < 60) return React.createElement("div", { style: { background: "rgba(249,115,22,0.06)", border: "1px solid rgba(249,115,22,0.2)", borderRadius: 12, padding: 24, marginBottom: 32 } },
              React.createElement("div", { style: { display: "flex", alignItems: "center", gap: 10, marginBottom: 8 } },
                React.createElement("span", { style: { fontSize: 16 } }, "⚠"),
                React.createElement("span", { style: { color: "#f97316", fontSize: 13, fontWeight: 600, letterSpacing: 1, textTransform: "uppercase" } }, "Primary Gap"),
              ),
              React.createElement("p", { style: { color: "rgba(255,255,255,0.55)", fontSize: 14, lineHeight: 1.6 } },
                "Your ", React.createElement("strong", { style: { color: "#e8e4dc" } }, weakest.label),
                " score (" + weakest.pct + "%) is your most significant area for development. Addressing this before pursuing independence will substantially improve your probability of a successful transition."
              ),
            );
            return null;
          })(),
          React.createElement("div", { style: { textAlign: "center" } },
            React.createElement("a", {
              href: readiness.ctaUrl, target: "_blank", rel: "noopener noreferrer",
              style: { ...goldBtn(false), display: "inline-block", textDecoration: "none", marginBottom: 16, width: "auto", padding: "16px 40px" },
              onMouseEnter: (e) => e.currentTarget.style.background = "#d4b45e",
              onMouseLeave: (e) => e.currentTarget.style.background = "#c9a84c",
            }, readiness.cta + " →"),
            React.createElement("br"),
            React.createElement("button", { onClick: () => { setStep(0); setAnswers({}); setSliderValues({}); setLeadForm({ name: "", email: "", phone: "", firm: "" }); },
              style: { background: "transparent", color: "rgba(255,255,255,0.3)", border: "none", padding: "12px 24px", fontSize: 13, cursor: "pointer" }
            }, "Retake Assessment"),
          )
        ),
      )
    )
  );
}

ReactDOM.createRoot(document.getElementById("app")).render(React.createElement(App));
</script>
</body>
</html>
